{"data":{"mdx":{"id":"a10df82f-415e-598d-90e0-9d2b8136eabd","excerpt":"In my previous  post about editor links , I showed how WordPress can create editor links using the live site URL instead of the WordPress URL. When I created a…","frontmatter":{"title":"Headless Theme for WordPress","date":"September 18, 2018","category":["Headless WordPress"],"featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAwT/2gAMAwEAAhADEAAAAc4ldM9cYf/EABgQAQEAAwAAAAAAAAAAAAAAAAEAAhAR/9oACAEBAAEFAthZE8L/xAAXEQEAAwAAAAAAAAAAAAAAAAABAhAR/9oACAEDAQE/ASKm1//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/AVn/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAEBAQEBAAAAAAAAAAAAAAABABEhMf/aAAgBAQABPyHJLLRyE8knb//aAAwDAQACAAMAAAAQhP8A/8QAGBEBAQADAAAAAAAAAAAAAAAAAQARIVH/2gAIAQMBAT8QeA0WHl//xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8QEctL/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARIRAx/9oACAEBAAE/EDsOYNgg22Uj1P/Z","aspectRatio":1.3333333333333333,"src":"/static/74fdeb2f2f3500fb9c81c9d3b33ed6df/81ef8/lisa-nguyen-J0KBYb2v-Oo-unsplash.jpg","srcSet":"/static/74fdeb2f2f3500fb9c81c9d3b33ed6df/c83a6/lisa-nguyen-J0KBYb2v-Oo-unsplash.jpg 300w,\n/static/74fdeb2f2f3500fb9c81c9d3b33ed6df/775d9/lisa-nguyen-J0KBYb2v-Oo-unsplash.jpg 600w,\n/static/74fdeb2f2f3500fb9c81c9d3b33ed6df/81ef8/lisa-nguyen-J0KBYb2v-Oo-unsplash.jpg 1200w,\n/static/74fdeb2f2f3500fb9c81c9d3b33ed6df/989b1/lisa-nguyen-J0KBYb2v-Oo-unsplash.jpg 1600w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"featuredImageAccount":"lisanguyen","featuredImagePhotographer":"Lisa Nguyen"},"code":{"body":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst layoutProps = {};\nreturn class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = null;\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      components\n    } = _this$props,\n          props = _objectWithoutProperties(_this$props, [\"components\"]);\n\n    return React.createElement(MDXTag, {\n      name: \"wrapper\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `In my previous `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://www.slushman.com/post/editor-links-for-headless-wordpress-themes\"\n      }\n    }, `post about editor links`), `, I showed how WordPress can create editor links using the live site URL instead of the WordPress URL. When I created a React app for my WordPress site, I run into two issues. First, I wanted to get as much data from WordPress as possible. Second, I want visitors to only view the React app, not the WordPress install. The solution for both of these problems lies in building a WordPress theme. Huh?`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `WordPress Theme for a Headless App`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Our headless React app still requires an activated, installed theme in our WordPress installation. Others have built `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://github.com/paramander/wp-headless-theme\"\n      }\n    }, `similar projects`), `, but mine serves two purposes:`), React.createElement(MDXTag, {\n      name: \"ol\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ol\"\n    }, `Adds support for menus, featured images, and other WordPress features`), React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ol\"\n    }, `Redirects users to the live site`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `I wanted my React app to behave similarly to how a typical WordPress theme behaves. For example, while most React apps use hard-coded menus, I wanted the menus to update when I manage them in WordPress. There’s no reason to edit React code just to add a menu item. Especially if the React app can get the menu structure from WordPress instead. Let’s start by looking at the files included in my `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://github.com/slushman/headless-theme\"\n      }\n    }, `Headless WordPress Theme`), `.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Theme Structure`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Since this theme does not display any content, it should be minimal. Here is the list of files:`), React.createElement(MDXTag, {\n      name: \"ul\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ul\"\n    }, `style.css`), React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ul\"\n    }, `functions.php`), React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ul\"\n    }, `index.php`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://github.com/slushman/headless-theme/blob/master/style.css\"\n      }\n    }, `style.css`), ` file only contains the required WordPress comment block. Next, let’s look at these other two files in more detail.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `WordPress Feature Supports`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `First and foremost, the `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://github.com/slushman/headless-theme/blob/master/functions.php\"\n      }\n    }, `functions.php`), ` file registers support for all the WordPress features you’ll need. As an example, if you need featured images for posts and pages, you’ll need to add a statement like:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `add_theme_support( 'post-thumbnails' );\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Same goes for menus. Register each menu needed for your site.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `This file can also be a catch-all for anything else you discover you’ll need. In future posts, I’ll talk about some of the weird WordPress quirks I corrected using the functions.php file.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `We’ll also need to redirect people trying to visit our WordPress install.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Redirects in a WordPress Theme`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `We only want people to see our headless React app. So if they accidentally (or purposefully) visit our WordPress install, everything should redirect them to the React app. The `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://github.com/slushman/headless-theme/blob/master/index.php\"\n      }\n    }, `index.php`), ` file contains a small JavaScript redirection, along with an HTML message. The HTML message links to the live site URL. The JavaScript redirects the user to the live site along with the requested route. For example, if someone tries to go to api.slushman.com/post/headless-theme-for-wordpress (that’s this post), they will redirect to www.slushman.com/post/headless-theme-for-wordpress instead.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `I started off trying to redirect using PHP, then JavaScript as a fallback, but found it wasn’t working properly and the JavaScript seemed to work better overall. Anyone not using JavaScript would see the message with the link. While that’s not the best experience for them, the React app definitely wouldn’t function, so the link works well enough.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Coming Up`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Now that I’ve explained the simple Headless WordPress Theme, next I’ll walk through the React app itself. Creating a React app posed its own set of challenges. It requires a different way of thinking compared to building a WordPress theme.`));\n  }\n\n}"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/headless-theme-for-wordpress/","previous":{"id":"0c7e27af-7ead-5c9e-b621-a9749eb8a866","fields":{"slug":"/post/editor-links-for-headless-wordpress-themes/"},"frontmatter":{"title":"Editor Links for Headless WordPress Themes","gallery":null,"category":["Headless WordPress"]},"code":{"scope":""}},"next":null}}