{"data":{"mdx":{"id":"1191606b-7fba-5294-86b5-dff97005e144","excerpt":"In the  previous post  of the  WordPress Plugin Boilerplate series , we walked through the structure. We also examined each file and what they do. The biggest…","frontmatter":{"title":"Understanding the Loader Class","date":"June 05, 2017","category":["WordPress Plugin Boilerplate"],"featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAcEFWQJ//8QAGxABAAICAwAAAAAAAAAAAAAAAQACAxEEEhP/2gAIAQEAAQUCMzUeR2HcvQsaCelif//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAwEBPwFhn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABsQAAIBBQAAAAAAAAAAAAAAAAAhEAERMUGR/9oACAEBAAY/ArsdGb7GI//EABsQAAIDAQEBAAAAAAAAAAAAAAERACExcVFh/9oACAEBAAE/IUofqplHRUvpAoCSXQhDz5MDfZ//2gAMAwEAAgADAAAAEOAv/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAh/9oACAEDAQE/EABs3//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAgEBPxCJr//EABsQAQADAQEBAQAAAAAAAAAAAAEAESExYcFB/9oACAEBAAE/ECiIvQ58gXVG8wV+Z9lJogJziesfw6AOHlSsiWaZkIAUUvJ//9k=","aspectRatio":1.499531396438613,"src":"/static/21991b33cce41e4dd1e9cfaf3c86c061/81ef8/markus-spiske-0YKHHLXsp_0-unsplash.jpg","srcSet":"/static/21991b33cce41e4dd1e9cfaf3c86c061/c83a6/markus-spiske-0YKHHLXsp_0-unsplash.jpg 300w,\n/static/21991b33cce41e4dd1e9cfaf3c86c061/775d9/markus-spiske-0YKHHLXsp_0-unsplash.jpg 600w,\n/static/21991b33cce41e4dd1e9cfaf3c86c061/81ef8/markus-spiske-0YKHHLXsp_0-unsplash.jpg 1200w,\n/static/21991b33cce41e4dd1e9cfaf3c86c061/989b1/markus-spiske-0YKHHLXsp_0-unsplash.jpg 1600w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"featuredImageAccount":"markusspiske","featuredImagePhotographer":"Markus Spiske"},"code":{"body":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst layoutProps = {};\nreturn class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = null;\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      components\n    } = _this$props,\n          props = _objectWithoutProperties(_this$props, [\"components\"]);\n\n    return React.createElement(MDXTag, {\n      name: \"wrapper\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `In the `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://www.slushman.com/post/the-structure-of%E2%80%A6ugin-boilerplate/\"\n      }\n    }, `previous post`), ` of the `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://www.slushman.com/post/guide-using-wordpress-plugin-boilerplate/\"\n      }\n    }, `WordPress Plugin Boilerplate series`), `, we walked through the structure. We also examined each file and what they do. The biggest feature of the version 3 rewrite is the new loader class.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The loader class loops through all the hook calls and registers them with WordPress all at once. The class consists of two class variables and four methods.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Class Variables`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Each of the class variables are arrays containing the hooks and their corresponding functions.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `\\$actions`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `An array of the all actions to register with WordPress.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `\\$filters`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `An array of the all the filters to register with WordPress.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Methods`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `There are only four methods in the loader class, not counting the constructor.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Constructor`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The class constructor simply assigns a blank array to each of those class variables.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `add_action()`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Adds the action passed to it to the \\$actions class variable using the add() method.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `add_filter()`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Adds the filter passed to it to the \\$filters class variable using the add() method.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `add()`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Takes the passed in hook and the other parameters and restructures everything into an array.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `run()`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Loops through the \\$actions and \\$filters class variables and registers each hook with WordPress.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Summary`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The main plugin class calls add_action() and add_filter() with the hook parameters. Each method passes parameters to the add() method, which collects all the hooks into respective class variables. The main plugin class calls the run() method, loops through the class variables, then registers the hooks with WordPress.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `How to Register Hooks`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The most confusing part of using the new loader class is properly registering hooks. While the boilerplate has methods named add_action() and add_filter(), they work differently than the `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://developer.wordpress.org/reference/functions/add_action/\"\n      }\n    }, `WordPress functions`), `.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The boilerplate gathers all the hooks to register them with WordPress all at once. Let’s use the enqueue_styles declaration in define_admin_hooks() as an example.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `First, we have to create an instance of the admin class and assign it as the variable \\$plugin_admin. We also pass the plugin_name and version using the get_plugin_name() and get_version() methods in this class.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$plugin_admin = new Plugin_Name_Admin( \\$this-&gt;get_plugin_name(), \\$this-&gt;get_version() );\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Next, we use the add_action method in the Loader instance. Each hook registers separately with the loader class. In the load_dependencies() method, we assigned the instantiated loader class to the \\$loader class variable.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$this-&gt;loader\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Since enqueue_styles is an action hook, we use the add_action() method from the loader class.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$this-&gt;loader-&gt;add_action\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `This first parameter of the boilerplate’s add_action method is the name of the hook. In this case, admin_enqueue_scripts.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$this-&gt;loader-&gt;add_action( 'admin_enqueue_scripts',\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The second parameter of the add_action method is the class instance of our action.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$this-&gt;loader-&gt;add_action( 'admin_enqueue_scripts', \\$plugin_admin,\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Finally, we put the name of the method in the class where WordPress can find our action. In this case, the name of the method is enqueue_styles.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$this-&gt;loader-&gt;add_action( 'admin_enqueue_scripts', \\$plugin_admin, 'enqueue_styles' );\n`)), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Additional Loader Method Parameters`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The loader class accepts two additional parameters: the hook priority and the accepted arguments. Both are optional and in this case, we’re not using either. However, a complete example would be:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `\\$this-&gt;loader-&gt;add_action( 'admin_enqueue_scripts', \\$plugin_admin, 'enqueue_styles', 10, 1 );\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Finally, in the admin class, the enqueue_styles() method contains:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `wp_enqueue_style( \\$this-&gt;plugin_name, plugin_dir_url( __FILE__ ) . 'css/plugin-name-admin.css', array(), \\$this-&gt;version, 'all' );\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `This is the standard way to enqueue a CSS file into the WordPress admin through the plugin boilerplate methods.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Summary`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `We have seen how the loader class works and the proper way to register a hook.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `In future posts, we will learn how to create various plugin features using the boilerplate. Let’s start by creating the WP Starter Plugin by using the plugin generator.`));\n  }\n\n}"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/understanding-loader-class/","previous":{"id":"872643ce-907b-53de-b8be-6da86a36e15f","fields":{"slug":"/post/the-structure-of-the-wordpress-plugin-boilerplate/"},"frontmatter":{"title":"The Structure of the WordPress Plugin Boilerplate","gallery":null,"category":["WordPress Plugin Boilerplate"]},"code":{"scope":""}},"next":{"id":"0a412110-a988-5e07-b592-5c59bdc3e215","fields":{"slug":"/post/using-plugin-generator/"},"frontmatter":{"title":"Using the Plugin Generator","gallery":null,"category":["WordPress Plugin Boilerplate"]},"code":{"scope":""}}}}