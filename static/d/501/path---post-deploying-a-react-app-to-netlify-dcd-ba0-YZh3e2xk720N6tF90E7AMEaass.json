{"data":{"mdx":{"id":"29722b3d-9c2d-576d-a581-17b0290f1032","excerpt":"As part of the creating a headless React-based frontend for my WordPress site, I decided to try hosting my files on Netlify. They tout being super fast when…","frontmatter":{"title":"Deploying a React App to Netlify","date":"June 05, 2018","category":["React"],"featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABcBAAMBAAAAAAAAAAAAAAAAAAECAwT/2gAMAwEAAhADEAAAAcdM9KZ0FA//xAAXEAEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEBAAEFAplR1X//xAAWEQEBAQAAAAAAAAAAAAAAAAAAIWH/2gAIAQMBAT8BxX//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAEBAQEBAAAAAAAAAAAAAAABABEhMf/aAAgBAQABPyEmWHkO+T5KJa3/2gAMAwEAAgADAAAAEH8//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERUf/aAAgBAwEBPxBuui4P/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERQf/aAAgBAgEBPxCaRH//xAAaEAEAAwADAAAAAAAAAAAAAAABABEhQVGx/9oACAEBAAE/EHUGntjVZVOYBty8D7DXczIyrP/Z","aspectRatio":1.499531396438613,"src":"/static/5b440da798cf9a335aaeb2d51aeec274/81ef8/ash-edmonds-XZ0xN0hmpi4-unsplash.jpg","srcSet":"/static/5b440da798cf9a335aaeb2d51aeec274/c83a6/ash-edmonds-XZ0xN0hmpi4-unsplash.jpg 300w,\n/static/5b440da798cf9a335aaeb2d51aeec274/775d9/ash-edmonds-XZ0xN0hmpi4-unsplash.jpg 600w,\n/static/5b440da798cf9a335aaeb2d51aeec274/81ef8/ash-edmonds-XZ0xN0hmpi4-unsplash.jpg 1200w,\n/static/5b440da798cf9a335aaeb2d51aeec274/989b1/ash-edmonds-XZ0xN0hmpi4-unsplash.jpg 1600w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"featuredImageAccount":"badashphotos","featuredImagePhotographer":"Ash Edmonds"},"code":{"body":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst layoutProps = {};\nreturn class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = null;\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      components\n    } = _this$props,\n          props = _objectWithoutProperties(_this$props, [\"components\"]);\n\n    return React.createElement(MDXTag, {\n      name: \"wrapper\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `As part of the creating a headless React-based frontend for my WordPress site, I decided to try hosting my files on Netlify. They tout being super fast when serving a non-database site; a natural fit for a React project. Wes Bos’s `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://reactforbeginners.com\"\n      }\n    }, `React for Beginners course`), ` shows how to deploy to Netlify using the netlify-cli npm package. However, since completing that course, I updated to Node 10, which is not compatible with netlify-cli and Netlify recently deprecated it. In this post, I’ll detail how to deploy a site from the command line using their new command line tool: netlifyctl.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Sign Up for Netlify`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you don’t already have an account, head over to `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://www.netlify.com\"\n      }\n    }, `Netlify.com`), ` and sign up for an account. You shouldn’t need to create a paid account yet, so don’t worry about adding payment options.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Install`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `First off, you’ll need to install the new tool on your computer. On OS X, it’s available through Homebrew and on Windows, it’s available through Scoop.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `OS X`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you don’t already have `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://brew.sh/\"\n      }\n    }, `Homebrew`), ` installed, open Terminal and enter this command, then follow the prompts:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `/usr/bin/ruby -e \"\\$(curl -fsSL https://raw.githubusercontent.com/\nHomebrew/install/master/install)\"\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `With Homebrew installed, point to the netlifyctl tap:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `brew tap netlify/netlifyctl\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Next, install it:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `brew install netlifyctl\n`)), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Windows`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you don’t already have `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://scoop.sh/\"\n      }\n    }, `Scoop`), ` installed, make sure you have `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://www.microsoft.com/en-us/download/details.aspx?id=34595\"\n      }\n    }, `PowerShell 3`), ` or higher installed, open it, then install Scoop using:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `iex (new-object net.webclient).downloadstring('https://get.scoop.sh')\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `With Scoop installed, add the netlifyctl bucket:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `scoop bucket add netlifyctl https://github.com/netlify/scoop-netlifyctl\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Then install it:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `scoop install netlifyctl\n`)), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Deploying a React App`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `In this case, I’m specifically talking about a project created with `, React.createElement(MDXTag, {\n      name: \"a\",\n      components: components,\n      parentName: \"p\",\n      props: {\n        \"href\": \"https://github.com/facebook/create-react-app\"\n      }\n    }, `create-react-app`), `. If you aren’t using create-react-app, you will need to change some paths to match your project.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `With netlifyctl installed, change directories into your project:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `cd /myreactapp\n`)), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Permissions`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Start by giving your app permission to access your Netlify account.`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `netlifyctl login\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `This will open your Netlify account in a web browser and ask if you want to give the CLI permission to access your account.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, React.createElement(\"a\", {\n      className: \"gatsby-resp-image-link\",\n      href: \"/static/2f03ab5c64680ed2500254120abd5871/a82ee/authorize-netlify-cli.png\",\n      style: {\n        \"display\": \"block\"\n      },\n      target: \"_blank\",\n      rel: \"noopener\"\n    }, React.createElement(\"span\", {\n      className: \"gatsby-resp-image-wrapper\",\n      style: {\n        \"position\": \"relative\",\n        \"display\": \"block\",\n        \"maxWidth\": \"590px\",\n        \"marginLeft\": \"auto\",\n        \"marginRight\": \"auto\"\n      }\n    }, React.createElement(\"span\", {\n      className: \"gatsby-resp-image-background-image\",\n      style: {\n        \"paddingBottom\": \"37.5%\",\n        \"position\": \"relative\",\n        \"bottom\": \"0px\",\n        \"left\": \"0px\",\n        \"backgroundSize\": \"cover\",\n        \"display\": \"block\"\n      }\n    }, React.createElement(\"img\", {\n      className: \"gatsby-resp-image-image\",\n      style: {\n        \"width\": \"100%\",\n        \"height\": \"100%\",\n        \"margin\": \"0px\",\n        \"verticalAlign\": \"middle\",\n        \"position\": \"absolute\",\n        \"top\": \"0px\",\n        \"left\": \"0px\",\n        \"boxShadow\": \"inset 0px 0px 0px 400px white\"\n      },\n      alt: \"authorize netlify cli\",\n      title: \"Netlify grant permissions prompt\",\n      src: \"/static/2f03ab5c64680ed2500254120abd5871/b9e4f/authorize-netlify-cli.png\",\n      srcSet: \"/static/2f03ab5c64680ed2500254120abd5871/cf440/authorize-netlify-cli.png 148w,\\n/static/2f03ab5c64680ed2500254120abd5871/d2d38/authorize-netlify-cli.png 295w,\\n/static/2f03ab5c64680ed2500254120abd5871/b9e4f/authorize-netlify-cli.png 590w,\\n/static/2f03ab5c64680ed2500254120abd5871/a82ee/authorize-netlify-cli.png 696w\",\n      sizes: \"(max-width: 590px) 100vw, 590px\"\n    }))))), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Click the Authorize button. Once it confirms the CLI has permission to access your account, you can close the browser tab/window.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Build`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you haven’t already, run the build process for your app. For create-react-app, that’s:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `npm run build\n`)), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Deploy`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Next, use this command to start the deploy process to Netlify:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `netlify deploy\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `It begins by asking if this is a new site. Entering “no” allows you to search by name for the existing site. Entering “yes” creates a new site.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Either way, it then asks for the path you’d like deployed. For a create-react-app project, it is:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `./build\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `This uploads your build directory to Netlify and prompts you with the URL for your deployed app, which you can alt+click to view.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Last Things`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `That’s it! Your site should be visible on Netlify! A few last things: you’ll notice there’s now a netlify.toml file in your project. This file contains the settings you selected while deploying your app. Commit that file to your git repo to avoid answering those prompt again in the future.`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Help!`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you forget how all this works, you can use:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `netlifyctl --help\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `This lists out the commands available and how to use them. You can also use it with a specific command like:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `netlifyctl deploy --help\n`)), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Bonus Material`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you need to make changes to your app - say you’re like me and you forgot to run “npm run build” first so you deployed the default create-react-app build folder - and you need to re-deploy the project. Fortunately, it’s very simple:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `netlify deploy\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `However, each time, the script prompts for the build path. This”feature” grows tiresome when you forget another thing, then another thing, then another thing and perform several deployments in a row (not that I would know from experience…). To avoid this, edit the netlify.toml file and add the build path. The default file includes your Netlify site ID and:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `[Build]\n  Publish = \"\"\n  Functions = \"\"\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Add your build path in the Publish value between the double quotes:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-bash\"\n      }\n    }, `[Build]\n  Publish = \"./build\"\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Now, the deployment script uploads the files from the build folder and doesn’t stop for prompts each time.`));\n  }\n\n}"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/deploying-a-react-app-to-netlify/","previous":{"id":"a5fb0c9d-41c5-51a8-9210-b920033b5338","fields":{"slug":"/post/troubleshooting-wordpress-ajax/"},"frontmatter":{"title":"Troubleshooting WordPress AJAX","gallery":null,"category":["Development"]},"code":{"scope":""}},"next":{"id":"40037948-0608-5518-bccf-1a4d116a2f3d","fields":{"slug":"/post/headless-wordpress-create-react-app/"},"frontmatter":{"title":"Headless WordPress and Create React App","gallery":null,"category":["Headless WordPress"]},"code":{"scope":""}}}}