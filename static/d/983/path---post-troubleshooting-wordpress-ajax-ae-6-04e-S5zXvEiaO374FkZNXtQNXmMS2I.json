{"data":{"mdx":{"id":"a5fb0c9d-41c5-51a8-9210-b920033b5338","excerpt":"I was working with some AJAX functionality a while back and started writing down the problems and solutions I ran across so they were all in one place…","frontmatter":{"title":"Troubleshooting WordPress AJAX","date":"May 28, 2018","category":["Development"],"featuredImage":{"childImageSharp":{"sizes":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQBAv/EABYBAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAAB7yNWVaQf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAESEUH/2gAIAQEAAQUCpIspHMMP/8QAFhEBAQEAAAAAAAAAAAAAAAAAABIT/9oACAEDAQE/AbaP/8QAFREBAQAAAAAAAAAAAAAAAAAAABP/2gAIAQIBAT8Bmk//xAAWEAEBAQAAAAAAAAAAAAAAAAAAMSD/2gAIAQEABj8CVcf/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREQQdHw/9oACAEBAAE/IVsE3s9WJCHMf//aAAwDAQACAAMAAAAQNx//xAAXEQEAAwAAAAAAAAAAAAAAAAAAEVFx/9oACAEDAQE/ELwy/8QAFxEBAAMAAAAAAAAAAAAAAAAAABFRcf/aAAgBAgEBPxCktP/EABsQAQEBAQADAQAAAAAAAAAAAAERACExUYGh/9oACAEBAAE/EDolr7yqgDBjouH32hdUIn3Jvn83/9k=","aspectRatio":1.4981273408239701,"src":"/static/38df8e79819adabe1cbeb1f1a47d78bb/81ef8/al-x-407225-unsplash.jpg","srcSet":"/static/38df8e79819adabe1cbeb1f1a47d78bb/c83a6/al-x-407225-unsplash.jpg 300w,\n/static/38df8e79819adabe1cbeb1f1a47d78bb/775d9/al-x-407225-unsplash.jpg 600w,\n/static/38df8e79819adabe1cbeb1f1a47d78bb/81ef8/al-x-407225-unsplash.jpg 1200w,\n/static/38df8e79819adabe1cbeb1f1a47d78bb/989b1/al-x-407225-unsplash.jpg 1600w","sizes":"(max-width: 1200px) 100vw, 1200px"}}},"featuredImageAccount":"alx_andru","featuredImagePhotographer":"Alex"},"code":{"body":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nconst layoutProps = {};\nreturn class MDXContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.layout = null;\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      components\n    } = _this$props,\n          props = _objectWithoutProperties(_this$props, [\"components\"]);\n\n    return React.createElement(MDXTag, {\n      name: \"wrapper\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `I was working with some AJAX functionality a while back and started writing down the problems and solutions I ran across so they were all in one place. Basically, this post is for my future self. I hope you find it useful as well. :)`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Specific Problems`), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `Function Always Returns 0`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `If you’re getting a “0” as the response from an AJAX call in the admin, it’s most likely one of three things:`), React.createElement(MDXTag, {\n      name: \"ul\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ul\"\n    }, `WordPress can’t find the function you’ve hooked.`), React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ul\"\n    }, `You don’t have a wp_die() at the end of the PHP function.`), React.createElement(MDXTag, {\n      name: \"li\",\n      components: components,\n      parentName: \"ul\"\n    }, `The action isn’t in the data you’re sending to the PHP function.`)), React.createElement(MDXTag, {\n      name: \"h3\",\n      components: components\n    }, `403 Forbidden Error`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `Check the Nonce. You probably copied it from another function and it’s checking the wrong one.`), React.createElement(MDXTag, {\n      name: \"h2\",\n      components: components\n    }, `Helpful Tip`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `The PHP function that processes the AJAX request has to echo something and should end with:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `wp_die();\n`)), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `You can use that to return something you want to see, like what data was passed to the function.`), React.createElement(MDXTag, {\n      name: \"p\",\n      components: components\n    }, `To check an array, use this instead:`), React.createElement(MDXTag, {\n      name: \"pre\",\n      components: components\n    }, React.createElement(MDXTag, {\n      name: \"code\",\n      components: components,\n      parentName: \"pre\",\n      props: {\n        \"className\": \"language-php\"\n      }\n    }, `wp_die( print_r( \\$some_array ) )\n`)));\n  }\n\n}"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/troubleshooting-wordpress-ajax/","previous":{"id":"5a429da5-b18e-5a77-8926-eba63c327052","fields":{"slug":"/post/code-and-pre-styling/"},"frontmatter":{"title":"Code Sample Styling","gallery":["library","existing-ideas"],"category":["Design"]},"code":{"scope":""}},"next":{"id":"29722b3d-9c2d-576d-a581-17b0290f1032","fields":{"slug":"/post/deploying-a-react-app-to-netlify/"},"frontmatter":{"title":"Deploying a React App to Netlify","gallery":null,"category":["React"]},"code":{"scope":""}}}}